{
    "$schema": "http://json-schema.org/draft-04/schema",
    "id": "https://immersive-web/gamepad-mapping/0.1.0/dataSources.schema.json",
    "title": "The data sources array",
    "type": "array",
    "description": "The data sources array",
    "additionalItems": false,
    "uniqueItems": true,
    "minItems": 1,
    "items": {
        "anyOf": [
            { 
                "description": "Button data source",
                "type": "object",
                "additionalProperties": false,
                "required": ["id", "dataSourceType", "button"],
                "properties":{
                    "id": { "allOf": [{ "$ref": "dataSources.properties.schema.json#/definitions/id" }] },
                    "dataSourceType": { "enum": ["buttonSource"] },
                    "button": { "allOf": [{ "$ref": "dataSources.properties.schema.json#/definitions/button" }] }
                }
            },
            { 
                "description": "Dpad data source",
                "type": "object",
                "additionalProperties": false,
                "required": ["id", "dataSourceType", "left", "right", "down", "up"],
                "properties":{
                    "id": { "allOf": [{ "$ref": "dataSources.properties.schema.json#/definitions/id" }] },
                    "dataSourceType": { "enum": ["dpadSource"] },
                    "left": { "allOf": [{ "$ref": "dataSources.properties.schema.json#/definitions/button" }] },
                    "right": { "allOf": [{ "$ref": "dataSources.properties.schema.json#/definitions/button" }] },
                    "down": { "allOf": [{ "$ref": "dataSources.properties.schema.json#/definitions/button" }] },
                    "up": { "allOf": [{ "$ref": "dataSources.properties.schema.json#/definitions/button" }] }
                }
            },
            { 
                "description": "Thumbstick and touchpad data source",
                "type": "object",
                "additionalProperties": false,
                "required": ["id", "dataSourceType", "xAxis", "yAxis"],
                "properties":{
                    "id": { "allOf": [{ "$ref": "dataSources.properties.schema.json#/definitions/id" }] },
                    "dataSourceType": { "enum": ["thumbstickSource", "touchpadSource"] },
                    "xAxis": { "allOf": [{ "$ref": "dataSources.properties.schema.json#/definitions/axis" }] },
                    "yAxis": { "allOf": [{ "$ref": "dataSources.properties.schema.json#/definitions/axis" }] },
                    "button": { "allOf": [{ "$ref": "dataSources.properties.schema.json#/definitions/button" }] }
                }
            }
        ]
    }
}